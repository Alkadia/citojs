var cito=window.cito||{};!function(e,t,n){"use strict";function r(e){return"string"==typeof e}function i(e){return e instanceof Array}function o(e){return"function"==typeof e}function a(e){return e.then!==n}function f(e,t){var r=typeof e;return"string"===r?e={tag:"#",children:e}:"function"===r&&(e=e(t),e=e===n?t:f(e,t)),e}function l(e,t,n){var r,i=e[t];if(i&&a(i)){r={};var o=!0;i.then(function(i){o?r=f(i,n):e[t]===r&&Y.update(r,i)}),o=!1}else r=f(i,n);return i!==r&&(e[t]=r),r}function d(e,t,r){var f,l=t;if(t)if(a(t)){t=[];var c=!0;l.then(function(n){c?t=d(e,n,r):e.children===t&&Y.updateChildren(e,n)}),c=!1}else o(t)&&(t=t(r),t===n&&(t=r));return i(t)||(t=t&&(t.children||"#"!==(f=t.tag)&&"<"!==f)?[t]:[]),l!==t&&(e.children=t),t}function c(e,t,n){var r,i=t.dom,o=t.domLength||1,a=n&&n.dom;if(i!==a)for(;o--;)r=o>0?i.nextSibling:null,a?e.insertBefore(i,a):e.appendChild(i),i=r}function u(e,t,n){if(e.insertAdjacentHTML)e.insertAdjacentHTML(t,n);else{var r;if(G.innerHTML=n,"beforebegin"===t)for(var i=e.parentNode;r=G.firstChild;)i.insertBefore(r,e);else{if("beforeend"!==t)throw new Error("Unsupported: "+t);for(;r=G.firstChild;)e.appendChild(r)}}}function s(e,t,n,r){if(n){var i=n.dom;if(r){var o=n.domLength||1;1===o?(V(n),e.replaceChild(t,i)):(e.insertBefore(t,i),C(e,n))}else e.insertBefore(t,i)}else e.appendChild(t)}function v(e,t,n,r,i,o){var a,f=e.tag,l=e.children;if(f){switch(f){case"#":a=R.createTextNode(l);break;case"!":a=R.createComment(l);break;case"<":if(l){var c=t.childNodes,v=c.length;if(i){var g=i.dom,p=g.previousSibling;u(g,"beforebegin",l),a=p?p.nextSibling:t.firstChild}else u(t,"beforeend",l),a=c[v];return e.dom=a,e.domLength=c.length-v,void(o&&i&&C(t,i))}a=R.createTextNode("");break;default:var b;switch(f){case"svg":b="http://www.w3.org/2000/svg";break;case"math":b="http://www.w3.org/1998/Math/MathML";break;default:b=n}return b?(e.ns=b,a=R.createElementNS(b,f)):a=R.createElement(f),e.dom=a,l=d(e,l),F&&t&&s(t,a,i,o),x(a,e,b,l,0,l.length,l.length>1),m(a,null,null,e,f,e.attrs,e.events),void(!F&&t&&s(t,a,i,o))}e.dom=a,t&&s(t,a,i,o)}else h(e,l,t,n,r,i,o)}function h(e,t,n,r,i,o,a){t=d(e,t);var f,c,u=t.length;if(r&&(e.ns=r),0===u)f=R.createTextNode(""),s(n,f,o,a);else{i=i||u>1,c=0;for(var h=0;u>h;h++){var m=l(t,h);v(m,n,r,i,o,!1),c+=m.domLength||1}f=t[0].dom,a&&C(n,o)}e.dom=f,e.domLength=c}function m(e,t,r,i,o,a,f){var l;if(a)for(l in a){var d=a[l];if("style"===l){var c=t&&t[l];c!==d&&p(e,c,a,d)}else b(o,l)?e[l]!==d&&(e[l]=d):t&&t[l]===d||g(e,l,d)}if(t)for(l in t)a&&a[l]!==n||(b(o,l)?e[l]="":e.removeAttribute(l));var u;if(f){e.virtualNode=i;for(u in f)r&&r[u]||k(e,u)}if(r)for(u in r)f&&f[u]||y(e,u)}function g(e,t,n){if(n===!1)e.removeAttribute(t);else{n===!0&&(n="");var r,i=t.indexOf(":");if(-1!==i){var o=t.substr(0,i);switch(o){case"xlink":r="http://www.w3.org/1999/xlink"}}r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}}function p(e,t,i,o){var a;if(!(r(o)||W&&t&&!r(t))){var f="";if(o)for(a in o)f+=a+": "+o[a]+"; ";o=f,W||(i.style=o)}var l=e.style;if(r(o))l.cssText=o;else{if(o)for(a in o){var d=o[a];if(!t||t[a]!==d){var c=d.indexOf("!important");if(-1!==c)l.setProperty(a,d.substr(0,c),"important");else{if(t){var u=t[a];u&&-1!==u.indexOf("!important")&&l.removeProperty(a)}l.setProperty(a,d,"")}}}if(t)for(a in t)o&&o[a]!==n||l.removeProperty(a)}}function b(e,t){switch(e){case"input":return"value"===t||"checked"===t;case"textarea":return"value"===t;case"select":return"value"===t||"selectedIndex"===t;case"option":return"selected"===t}}function k(e,t){if(K)e.addEventListener(t,P,!1);else{var n="on"+t;n in e?e[n]=P:e.attachEvent(n,P)}}function y(e,t){if(K)e.removeEventListener(t,P,!1);else{var n="on"+t;n in e?e[n]=null:e.detachEvent(n,P)}}function w(e){return r(e)?e:"#"===e.tag?e.children:null}function x(e,t,n,r,i,o,a,f){if(0===i&&1===o&&!a){var d=r[0],c=w(d);if(null!==c)return void N(e,c);if("<"===d.tag)return void(e.innerHTML=d.children)}for(;o>i;i++)v(l(r,i),e,n,a,f)}function L(e,t,n,r){if(0===n&&1===r&&1===t.length){var i=t[0];if(!i.dom){for(var o;o=e.firstChild;)e.removeChild(o);return}}for(;r>n;n++)C(e,t[n])}function C(e,t){V(t);for(var n,r=t.dom,i=t.domLength||1;i--;)n=i>0?r.nextSibling:null,e.removeChild(r),r=n}function N(e,t){J?e.textContent=t:e.innerText=t}function T(e,t,n,r){var i=r[0],o=t[0],a=w(i),f=0!==n,l=!1;if(null!==a){if(!f){var d=w(o);l=null!==d,f=a!==d}f&&(l||j(t),N(e,a))}else"<"===i.tag?(f||(l="<"===o.tag,f=!l||i.children!==o.children),f&&(l||j(t),e.innerHTML=i.children)):f=!1;return f||l}function E(e,t,n,r,i,o,a){if(i=d(t,i,r),i!==r){var f=r.length-1,u=i.length-1;if(o=o||u>0,0!==u||o||!T(e,r,f,i)){if(0===f){var s=l(r,0);s.dom||(s.dom=e.firstChild,"<"===s.tag&&(s.domLength=e.childNodes.length))}var h,m=0,g=0,p=!0;e:for(;p&&f>=m&&u>=g;){p=!1;var b,k,y,w;for(b=r[m],y=l(i,g,b);b.key===y.key;){if(h=r[m+1]||a,O(b,y,e,n,o,h),m++,g++,m>f||g>u)break e;b=r[m],y=l(i,g,b),p=!0}for(k=r[f],w=l(i,u);k.key===w.key;){if(h=i[u+1]||a,O(k,w,e,n,o,h),f--,u--,m>f||g>u)break e;k=r[f],w=l(i,u),p=!0}for(;b.key===w.key;){if(h=i[u+1]||a,O(b,w,e,n,o,h),c(e,w,h),m++,u--,m>f||g>u)break e;b=r[m],w=l(i,u),p=!0}for(;k.key===y.key;){if(h=r[m]||a,O(k,y,e,n,h),c(e,y,h),f--,g++,m>f||g>u)break e;k=r[f],y=l(i,g),p=!0}}if(m>f)h=l(i,u+1)||a,x(e,t,n,i,g,u+1,o,h);else if(g>u)L(e,r,m,f+1);else{var N,E,P=r[f+1],A={};for(N=f;N>=m;N--)E=r[N],E.next=P,A[E.key]=E,P=E;for(h=l(i,u+1)||a,N=u;N>=g;N--){var M=i[N],S=M.key;E=A[S],E?(A[S]=null,P=E.next,O(E,M,e,n,o,h),(P&&P.key)!==(h&&h.key)&&c(e,M,h)):v(M,e,n,o,h),h=M}for(N=m;f>=N;N++)E=r[N],null!==A[E.key]&&C(e,E)}}}}function P(e){e=B(e,this);var t=e.currentTarget,n=t.virtualNode.events[e.type];if(i(n)){for(var r=0,o=n.length;o>r;r++)if(H(n[r],t,e),X){X=!1;break}}else H(n,t,e)}function A(){this.defaultPrevented=!0,this.returnValue=!1}function M(){this.cancelBubble=!0}function S(){X=!0,this.stopPropagation()}function B(e,n){return e||(e=t.event,e.preventDefault||(e.preventDefault=A,e.stopPropagation=M,e.defaultPrevented=e.returnValue===!1,e.target=e.srcElement),e.currentTarget=n.nodeType?n:e.target),e.stopImmediatePropagation=S,e}function H(e,t,n){try{e.call(t,n)===!1&&n.preventDefault()}catch(r){z.error(r.stack||r)}}function O(e,t,n,r,i,o){if(t!==e){var a,f=t.tag,l=e.children,d=t.children;if(e.tag!==f)v(t,n,r,i,e,!0);else if(f)switch(a=e.dom,f){case"#":case"!":l!==d&&(a.nodeValue=d),t.dom=a;break;case"<":l!==d?v(t,n,c,i,e,!0):(t.dom=e.dom,t.domLength=e.domLength);break;default:var c=e.ns;c&&(t.ns=c),t.dom=a,E(a,t,c,l,d,!1),m(a,e.attrs,e.events,t,f,t.attrs,t.events)}else D(e,l,t,d,n,r,i,o)}}function D(e,t,n,r,i,o,a,f){if(r=d(n,r,t),r!==t){var l,c,u=t.length,v=r.length;if(o&&(n.ns=o),a=a||v>1,0===v)0===u?l=e.dom:(L(i,t,0,t.length),l=R.createTextNode(""),s(i,l,f));else if(0===u)i.removeChild(e.dom),h(n,r,i,o,a,f);else if(E(i,n,o,t,r,a,f),v>0){l=r[0].dom,c=0;for(var m=0;v>m;m++)c+=r[m].domLength||1}n.dom=l,n.domLength=c}}function V(e){if(!r(e)){var t=e.dom;if(t){var i=e.events;if(i)for(var o in i)y(t,o);t.virtualNode&&(t.virtualNode=n)}var a=e.children;r(a)||j(a)}}function j(e){for(var t=0,n=e.length;n>t;t++)V(e[t])}function I(e,t){var r;for(r in e)t[r]=e[r];for(r in t)e[r]===n&&(t[r]=n)}var R=t.document,U=t.navigator,q=function(){},z=t.console||{warn:q,error:q},F=-1!==U.userAgent.indexOf("Trident"),G=R.createElement("div"),J="textContent"in R,K="addEventListener"in R,Q="createRange"in R,W="setProperty"in G.style,X=(Q?R.createRange():null,!1),Y=e.vdom={create:function(e){return e=f(e),v(e),e},append:function(e,t){return t=Y.create(t),e.appendChild(t.dom),t},update:function(e,t){return t=f(t,e),O(e,t,e.dom.parentNode),I(t,e),e},updateChildren:function(e,t){var n=e.children;t=d(e,t,n),E(e.dom,e,e.ns,n,t),e.children=t},remove:function(e){var t=e.dom.parentNode;C(t,e)}}}(cito,window);