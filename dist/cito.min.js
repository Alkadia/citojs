var cito=window.cito||{};!function(e,t,n){"use strict";function r(e){return"string"==typeof e}function i(e){return e instanceof Array}function o(e){return"function"==typeof e}function a(e,t){var n=typeof e;return"string"===n?{tag:"#",children:e}:"function"===n?a(e(t),t):e}function f(e,t,n){var r=e[t],i=a(r,n);return r!==i&&(e[t]=i),i}function l(e,t,n){var r,a=t;return o(t)&&(t=t(n)),i(t)||(t=t&&(t.children||"#"!==(r=t.tag)&&"<"!==r)?[t]:[]),a!==t&&(e.children=t),t}function c(e,t,n){for(var r,i=t.dom,o=t.domLength||1,a=n&&n.dom;o--;)r=o>0?i.nextSibling:null,a?e.insertBefore(i,a):e.appendChild(i),i=r}function u(e,t,n){if(1===n.nodeType)n.insertAdjacentHTML("beforebegin",t);else{O.innerHTML=t;for(var r;r=O.firstChild;)e.insertBefore(r,n)}}function d(e,t,n,r,i){var o,a,f=e.tag,c=e.children;switch(f){case"#":o=B.createTextNode(c);break;case"!":o=B.createComment(c);break;case"<":if(c){var d=t.childNodes,v=d.length;if(r){a=r.dom;var h=a.previousSibling;u(t,c,a),e.dom=h?h.nextSibling:t.firstChild}else t.insertAdjacentHTML("beforeend",c),e.dom=d[v];return e.domLength=d.length-v,void(i&&r&&b(t,r))}o=B.createTextNode("");break;default:var g;switch(f){case"svg":g="http://www.w3.org/2000/svg";break;case"math":g="http://www.w3.org/1998/Math/MathML";break;default:g=n&&n.ns}g?(e.ns=g,o=B.createElementNS(g,f)):o=B.createElement(f),s(o,null,null,e,f,e.attrs,e.events),c=l(e,c),y(o,e,c,0,c.length)}if(e.dom=o,t)if(r)if(a=r.dom,i){var m=r.domLength||1;1===m?(A(r),t.replaceChild(o,a)):(t.insertBefore(o,a),b(t,r))}else t.insertBefore(o,a);else t.appendChild(o)}function s(e,t,r,i,o,a,f){var l;if(a)for(l in a){var c=a[l];if("style"===l){var u=t&&t[l];u!==c&&v(e,u,a,c)}else if(h(o,l))e[l]!==c&&(e[l]=c);else if(!t||t[l]!==c)if(c===!1)e.removeAttribute(l);else{c===!0&&(c="");var d,s=l.indexOf(":");if(-1!==s){var p=l.substr(0,s);switch(p){case"xlink":d="http://www.w3.org/1999/xlink"}}d?e.setAttributeNS(d,l,c):e.setAttribute(l,c)}}if(t)for(l in t)a&&a[l]!==n||(h(o,l)?e[l]="":e.removeAttribute(l));var y;if(f){e.virtualNode=i;for(y in f)r&&r[y]||g(e,y)}if(r)for(y in r)f&&f[y]||m(e,y)}function v(e,t,i,o){var a;if(!(r(o)||R&&t&&!r(t))){var f="";if(o)for(a in o)f+=a+": "+o[a]+"; ";o=f,R||(i.style=o)}var l=e.style;if(r(o))l.cssText=o;else{if(o)for(a in o){var c=o[a];if(!t||t[a]!==c){var u=c.indexOf("!important");if(-1!==u)l.setProperty(a,c.substr(0,u),"important");else{if(t){var d=t[a];d&&-1!==d.indexOf("!important")&&l.removeProperty(a)}l.setProperty(a,c,"")}}}if(t)for(a in t)o&&o[a]!==n||l.removeProperty(a)}}function h(e,t){switch(e){case"input":return"value"===t||"checked"===t;case"textarea":return"value"===t;case"select":return"selectedIndex"===t;case"option":return"selected"===t}}function g(e,t){if(j)e.addEventListener(t,L,!1);else{var n="on"+t;n in e?e[n]=L:e.attachEvent(n,L)}}function m(e,t){if(j)e.removeEventListener(t,L,!1);else{var n="on"+t;n in e?e[n]=null:e.detachEvent(n,L)}}function p(e){return r(e)?e:"#"===e.tag?e.children:null}function y(e,t,n,r,i,o){if(0===r&&1===i&&1===n.length){var a=n[0],l=p(a);if(null!==l)return void w(e,l);if("<"===a.tag)return void(e.innerHTML=a.children)}for(;i>r;r++)d(f(n,r),e,t,o)}function k(e,t,n,r){if(0===n&&1===r&&1===t.length){var i=t[0];if(null!==p(i)||"<"===i.tag){for(var o;o=e.firstChild;)e.removeChild(o);return}}for(;r>n;n++)b(e,t[n])}function b(e,t){A(t);for(var n,r=t.dom,i=t.domLength||1;i--;)n=i>0?r.nextSibling:null,e.removeChild(r),r=n}function w(e,t){V?e.textContent=t:e.innerText=t}function x(e,t,n,r){var i,o=n.length-1,a=r.length-1;if(0===a){var l=r[0],u=p(l);if(i=n[0],null!==u){if(0!==o||u!==p(i))return void w(e,u)}else if("<"===l.tag&&(0!==o||"<"!==i.tag||i.children!==l.children))return void(e.innerHTML=l.children)}0===o&&(i=f(n,0),i.dom=e.firstChild,"<"===i.tag&&(i.domLength=e.childNodes.length));var s=0,v=0,h=!0;e:for(;h&&o>=s&&a>=v;){h=!1;var g,m,x,L;for(g=n[s],x=f(r,v,g);g.key===x.key;){if(M(g,x,e,t),s++,v++,s>o||v>a)break e;g=n[s],x=f(r,v,g),h=!0}for(m=n[o],L=f(r,a,m);m.key===L.key;){if(M(m,L,e,t),o--,a--,s>o||v>a)break e;m=n[o],L=f(r,a),h=!0}for(;g.key===L.key;){if(M(g,L,e,t),c(e,L,r[a+1]),s++,a--,s>o||v>a)break e;g=n[s],L=f(r,a),h=!0}for(;m.key===x.key;){if(M(m,x,e,t),c(e,x,n[s]),o--,v++,s>o||v>a)break e;m=n[o],x=f(r,v),h=!0}}if(s>o)y(e,t,r,v,a+1,f(r,a+1));else if(v>a)k(e,n,s,o+1);else{var C,T,N=n[o+1],P={};for(C=o;C>=s;C--)T=n[C],T.next=N,P[T.key]=T,N=T;var E=f(r,a+1);for(C=a;C>=v;C--){var A=r[C],S=A.key;T=P[S],T?(P[S]=null,N=T.next,M(T,A,t),(N&&N.key)!==(E&&E.key)&&c(e,A,E)):d(A,e,t,E),E=A}for(C=s;o>=C;C++)T=n[C],null!==P[T.key]&&b(e,T)}}function L(e){e=P(e,this);var t=e.currentTarget,n=t.virtualNode.events[e.type];if(i(n)){for(var r=0,o=n.length;o>r;r++)if(E(n[r],t,e),q){q=!1;break}}else E(n,t,e)}function C(){this.defaultPrevented=!0,this.returnValue=!1}function T(){this.cancelBubble=!0}function N(){q=!0,this.stopPropagation()}function P(e,n){return e||(e=t.event,e.preventDefault||(e.preventDefault=C,e.stopPropagation=T,e.defaultPrevented=e.returnValue===!1,e.target=e.srcElement),e.currentTarget=n.nodeType?n:e.target),e.stopImmediatePropagation=N,e}function E(e,t,n){try{e.call(t,n)===!1&&n.preventDefault()}catch(r){D.error(r.stack||r)}}function M(e,t,n,r){var i=t.tag;if(e.tag!==i)d(t,n,r,e,!0);else{var o=e.dom,a=e.children,f=t.children;switch(i){case"#":case"!":a!==f&&(o.nodeValue=f);break;case"<":return void(a!==f?d(t,n,r,e,!0):(t.dom=e.dom,t.domLength=e.domLength));default:s(o,e.attrs,e.events,t,i,t.attrs,t.events),x(o,t,a,l(t,f,a))}t.dom=o}}function A(e){var t=e.dom,r=e.events;if(r)for(var o in r)m(t,o);t.virtualNode&&(t.virtualNode=n);var a=e.children;if(a)if(i(a))for(var f=0,l=a.length;l>f;f++){var c=a[f];c.tag&&A(c)}else a.tag&&A(a)}function S(e,t){var r;for(r in e)t[r]=e[r];for(r in t)e[r]===n&&(t[r]=n)}var B=t.document,H=function(){},D=t.console||{warn:H,error:H},O=B.createElement("div"),V="textContent"in B,j="addEventListener"in B,I="createRange"in B,R="setProperty"in O.style,q=(I?B.createRange():null,!1),z=e.vdom={create:function(e){return e=a(e),d(e),e},append:function(e,t){return t=z.create(t),e.appendChild(t.dom),t},update:function(e,t){return t=a(t,e),M(e,t,e.dom.parentNode),S(t,e),e},remove:function(e){var t=e.dom.parentNode;b(t,e)}}}(cito,window);