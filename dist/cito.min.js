var cito=window.cito||{};!function(e,t,n){"use strict";function r(e){return"string"==typeof e}function i(e){return e instanceof Array}function o(e){return"function"==typeof e}function a(e,t){var n=typeof e;return"string"===n?{tag:"#",children:e}:"function"===n?a(e(t),t):e}function f(e,t,n){var r=e[t],i=a(r,n);return r!==i&&(e[t]=i),i}function l(e,t,n){var r,a=t;return o(t)&&(t=t(n)),i(t)||(t=t&&(t.children||"#"!==(r=t.tag)&&"<"!==r)?[t]:[]),a!==t&&(e.children=t),t}function c(e,t,n){var r,i=t.dom,o=t.domLength||1,a=n&&n.dom;if(i!==a)for(;o--;)r=o>0?i.nextSibling:null,a?e.insertBefore(i,a):e.appendChild(i),i=r}function d(e,t,n){if(1===n.nodeType)n.insertAdjacentHTML("beforebegin",t);else{q.innerHTML=t;for(var r;r=q.firstChild;)e.insertBefore(r,n)}}function u(e,t,n,r){if(n){var i=n.dom;if(r){var o=n.domLength||1;1===o?(D(n),e.replaceChild(t,i)):(e.insertBefore(t,i),x(e,n))}else e.insertBefore(t,i)}else e.appendChild(t)}function s(e,t,n,r,i,o){var a,f=e.tag,c=e.children;if(f){switch(f){case"#":a=j.createTextNode(c);break;case"!":a=j.createComment(c);break;case"<":if(c){var s=t.childNodes,m=s.length;if(i){var g=i.dom,p=g.previousSibling;d(t,c,g),a=p?p.nextSibling:t.firstChild}else t.insertAdjacentHTML("beforeend",c),a=s[m];return e.dom=a,e.domLength=s.length-m,void(o&&i&&x(t,i))}a=j.createTextNode("");break;default:var y;switch(f){case"svg":y="http://www.w3.org/2000/svg";break;case"math":y="http://www.w3.org/1998/Math/MathML";break;default:y=n&&n.ns}y?(e.ns=y,a=j.createElementNS(y,f)):a=j.createElement(f),h(a,null,null,e,f,e.attrs,e.events),c=l(e,c),b(a,e,c,0,c.length,c.length>1)}e.dom=a,t&&u(t,a,i,o)}else v(e,c,t,n,r,i,o)}function v(e,t,n,r,i,o,a){t=l(e,t);var c,d,v=t.length;if(0===v)c=j.createTextNode(""),u(n,c,o,a);else{i=i||v>1,d=0;for(var h=0;v>h;h++){var m=f(t,h);s(m,n,r,i,o,!1),d+=m.domLength||1}c=t[0].dom,a&&x(n,o)}e.dom=c,e.domLength=d}function h(e,t,r,i,o,a,f){var l;if(a)for(l in a){var c=a[l];if("style"===l){var d=t&&t[l];d!==c&&m(e,d,a,c)}else if(g(o,l))e[l]!==c&&(e[l]=c);else if(!t||t[l]!==c)if(c===!1)e.removeAttribute(l);else{c===!0&&(c="");var u,s=l.indexOf(":");if(-1!==s){var v=l.substr(0,s);switch(v){case"xlink":u="http://www.w3.org/1999/xlink"}}u?e.setAttributeNS(u,l,c):e.setAttribute(l,c)}}if(t)for(l in t)a&&a[l]!==n||(g(o,l)?e[l]="":e.removeAttribute(l));var h;if(f){e.virtualNode=i;for(h in f)r&&r[h]||p(e,h)}if(r)for(h in r)f&&f[h]||y(e,h)}function m(e,t,i,o){var a;if(!(r(o)||J&&t&&!r(t))){var f="";if(o)for(a in o)f+=a+": "+o[a]+"; ";o=f,J||(i.style=o)}var l=e.style;if(r(o))l.cssText=o;else{if(o)for(a in o){var c=o[a];if(!t||t[a]!==c){var d=c.indexOf("!important");if(-1!==d)l.setProperty(a,c.substr(0,d),"important");else{if(t){var u=t[a];u&&-1!==u.indexOf("!important")&&l.removeProperty(a)}l.setProperty(a,c,"")}}}if(t)for(a in t)o&&o[a]!==n||l.removeProperty(a)}}function g(e,t){switch(e){case"input":return"value"===t||"checked"===t;case"textarea":return"value"===t;case"select":return"selectedIndex"===t;case"option":return"selected"===t}}function p(e,t){if(F)e.addEventListener(t,N,!1);else{var n="on"+t;n in e?e[n]=N:e.attachEvent(n,N)}}function y(e,t){if(F)e.removeEventListener(t,N,!1);else{var n="on"+t;n in e?e[n]=null:e.detachEvent(n,N)}}function k(e){return r(e)?e:"#"===e.tag?e.children:null}function b(e,t,n,r,i,o,a){if(0===r&&1===i&&!o){var l=n[0],c=k(l);if(null!==c)return void L(e,c);if("<"===l.tag)return void(e.innerHTML=l.children)}for(;i>r;r++)s(f(n,r),e,t,o,a)}function w(e,t,n,r){if(0===n&&1===r&&1===t.length){var i=t[0];if(!i.dom){for(var o;o=e.firstChild;)e.removeChild(o);return}}for(;r>n;n++)x(e,t[n])}function x(e,t){D(t);for(var n,r=t.dom,i=t.domLength||1;i--;)n=i>0?r.nextSibling:null,e.removeChild(r),r=n}function L(e,t){z?e.textContent=t:e.innerText=t}function T(e,t,n,r){var i=r[0],o=t[0],a=k(i),f=0!==n,l=!1;if(null!==a){if(!f){var c=k(o);l=null!==c,f=a!==c}f&&(l||O(t),L(e,a))}else"<"===i.tag?(f||(l="<"===o.tag,f=!l||i.children!==o.children),f&&(l||O(t),e.innerHTML=i.children)):f=!1;return f||l}function C(e,t,n,r,i,o){r=l(t,r,n);var a=n.length-1,d=r.length-1;if(i=i||d>0,0!==d||i||!T(e,n,a,r)){if(0===a){var u=f(n,0);u.dom||(u.dom=e.firstChild,"<"===u.tag&&(u.domLength=e.childNodes.length))}var v,h=0,m=0,g=!0;e:for(;g&&a>=h&&d>=m;){g=!1;var p,y,k,L;for(p=n[h],k=f(r,m,p);p.key===k.key;){if(v=n[h+1]||o,B(p,k,e,t,i,v),h++,m++,h>a||m>d)break e;p=n[h],k=f(r,m,p),g=!0}for(y=n[a],L=f(r,d,y);y.key===L.key;){if(v=r[d+1]||o,B(y,L,e,t,i,v),a--,d--,h>a||m>d)break e;y=n[a],L=f(r,d),g=!0}for(;p.key===L.key;){if(v=r[d+1]||o,B(p,L,e,t,i,v),c(e,L,v),h++,d--,h>a||m>d)break e;p=n[h],L=f(r,d),g=!0}for(;y.key===k.key;){if(v=n[h]||o,B(y,k,e,t,v),c(e,k,v),a--,m++,h>a||m>d)break e;y=n[a],k=f(r,m),g=!0}}if(h>a)v=f(r,d+1)||o,b(e,t,r,m,d+1,i,v);else if(m>d)w(e,n,h,a+1);else{var C,N,P=n[a+1],E={};for(C=a;C>=h;C--)N=n[C],N.next=P,E[N.key]=N,P=N;for(v=f(r,d+1)||o,C=d;C>=m;C--){var M=r[C],A=M.key;N=E[A],N?(E[A]=null,P=N.next,B(N,M,e,t,i,v),(P&&P.key)!==(v&&v.key)&&c(e,M,v)):s(M,e,t,i,v),v=M}for(C=h;a>=C;C++)N=n[C],null!==E[N.key]&&x(e,N)}}}function N(e){e=A(e,this);var t=e.currentTarget,n=t.virtualNode.events[e.type];if(i(n)){for(var r=0,o=n.length;o>r;r++)if(S(n[r],t,e),K){K=!1;break}}else S(n,t,e)}function P(){this.defaultPrevented=!0,this.returnValue=!1}function E(){this.cancelBubble=!0}function M(){K=!0,this.stopPropagation()}function A(e,n){return e||(e=t.event,e.preventDefault||(e.preventDefault=P,e.stopPropagation=E,e.defaultPrevented=e.returnValue===!1,e.target=e.srcElement),e.currentTarget=n.nodeType?n:e.target),e.stopImmediatePropagation=M,e}function S(e,t,n){try{e.call(t,n)===!1&&n.preventDefault()}catch(r){R.error(r.stack||r)}}function B(e,t,n,r,i,o){var a,f=t.tag,l=e.children,c=t.children;if(e.tag!==f)s(t,n,r,i,e,!0);else if(f){switch(a=e.dom,f){case"#":case"!":l!==c&&(a.nodeValue=c);break;case"<":return void(l!==c?s(t,n,r,i,e,!0):(t.dom=e.dom,t.domLength=e.domLength));default:h(a,e.attrs,e.events,t,f,t.attrs,t.events),C(a,t,l,c,!1)}t.dom=a}else H(e,l,t,c,n,r,i,o)}function H(e,t,n,r,i,o,a,f){r=l(n,r,t);var c,d,s=t.length,h=r.length;if(a=a||h>1,0===h)0===s?c=e.dom:(w(i,t,0,t.length),c=j.createTextNode(""),u(i,c,f));else if(0===s)i.removeChild(e.dom),v(n,r,i,o,a,f);else if(C(i,n,t,r,a,f),h>0){c=r[0].dom,d=0;for(var m=0;h>m;m++)d+=r[m].domLength||1}n.dom=c,n.domLength=d}function D(e){if(!r(e)){var t=e.dom;if(t){var i=e.events;if(i)for(var o in i)y(t,o);t.virtualNode&&(t.virtualNode=n)}var a=e.children;r(a)||O(a)}}function O(e){for(var t=0,n=e.length;n>t;t++)D(e[t])}function V(e,t){var r;for(r in e)t[r]=e[r];for(r in t)e[r]===n&&(t[r]=n)}var j=t.document,I=function(){},R=t.console||{warn:I,error:I},q=j.createElement("div"),z="textContent"in j,F="addEventListener"in j,G="createRange"in j,J="setProperty"in q.style,K=(G?j.createRange():null,!1),Q=e.vdom={create:function(e){return e=a(e),s(e),e},append:function(e,t){return t=Q.create(t),e.appendChild(t.dom),t},update:function(e,t){return t=a(t,e),B(e,t,e.dom.parentNode),V(t,e),e},remove:function(e){var t=e.dom.parentNode;x(t,e)}}}(cito,window);