var cito=window.cito||{};!function(e,t,n){"use strict";function r(e){return"string"==typeof e}function i(e){return e instanceof Array}function o(e){return"function"==typeof e}function a(e,t){var n=typeof e;return"string"===n?{tag:"#",children:e}:"function"===n?a(e(t),t):e}function f(e,t,n){var r=e[t],i=a(r,n);return r!==i&&(e[t]=i),i}function l(e){var t=i(e)?e[0]:e;return a(t)}function u(e,t){var n=l(e);return n&&!n.dom&&(n.dom=t.firstChild),n}function c(e,t,n){return t&&o(t)&&(e.children=t=t(n)),t}function s(e,t){F?e.textContent=t:e.innerText=t}function d(e,t,n){for(var r,i=t.dom,o=t.domLength||1,a=n&&n.dom;o--;)r=o>0?i.nextSibling:null,a?e.insertBefore(i,a):e.appendChild(i),i=r}function v(e,t,n){if(1===n.nodeType)n.insertAdjacentHTML("beforebegin",t);else{z.innerHTML=t;for(var r;r=z.firstChild;)e.insertBefore(r,n)}}function h(e,t,n,r,i){var o,a,f=e.tag,l=e.children;switch(f){case"#":o=I.createTextNode(l);break;case"!":o=I.createComment(l);break;case"<":if(l){var u=t.childNodes,s=u.length;if(r){a=r.dom;var d=a.previousSibling;v(t,l,a),e.dom=d?d.nextSibling:t.firstChild}else t.insertAdjacentHTML("beforeend",l),e.dom=u[s];return e.domLength=u.length-s,void(i&&r&&P(t,r))}o=I.createTextNode("");break;default:var h;switch(f){case"svg":h="http://www.w3.org/2000/svg";break;case"math":h="http://www.w3.org/1998/Math/MathML";break;default:h=n&&n.ns}h?(e.ns=h,o=I.createElementNS(h,f)):o=I.createElement(f),m(o,null,null,e,f,e.attrs,e.events),w(o,e,c(e,l))}if(e.dom=o,t)if(r)if(a=r.dom,i){var g=r.domLength||1;1===g?(j(r),t.replaceChild(o,a)):(t.insertBefore(o,a),P(t,r))}else t.insertBefore(o,a);else t.appendChild(o)}function m(e,t,r,i,o,a,f){var l;if(a)for(l in a){var u=a[l];if("style"===l){var c=t&&t[l];c!==u&&g(e,c,a,u)}else if(p(o,l))e[l]!==u&&(e[l]=u);else if(!t||t[l]!==u)if(u===!1)e.removeAttribute(l);else{u===!0&&(u="");var s,d=l.indexOf(":");if(-1!==d){var v=l.substr(0,d);switch(v){case"xlink":s="http://www.w3.org/1999/xlink"}}s?e.setAttributeNS(s,l,u):e.setAttribute(l,u)}}if(t)for(l in t)a&&a[l]!==n||(p(o,l)?e[l]="":e.removeAttribute(l));var h;if(f){e.virtualNode=i;for(h in f)r&&r[h]||y(e,h)}if(r)for(h in r)f&&f[h]||k(e,h)}function g(e,t,i,o){var a;if(!(r(o)||K&&t&&!r(t))){var f="";if(o)for(a in o)f+=a+": "+o[a]+"; ";o=f,K||(i.style=o)}var l=e.style;if(r(o))l.cssText=o;else{if(o)for(a in o){var u=o[a];if(!t||t[a]!==u){var c=u.indexOf("!important");if(-1!==c)l.setProperty(a,u.substr(0,c),"important");else{if(t){var s=t[a];s&&-1!==s.indexOf("!important")&&l.removeProperty(a)}l.setProperty(a,u,"")}}}if(t)for(a in t)o&&o[a]!==n||l.removeProperty(a)}}function p(e,t){switch(e){case"input":return"value"===t||"checked"===t;case"textarea":return"value"===t;case"select":return"selectedIndex"===t;case"option":return"selected"===t}}function y(e,t){if(G)e.addEventListener(t,A,!1);else{var n="on"+t;n in e?e[n]=A:e.attachEvent(n,A)}}function k(e,t){if(G)e.removeEventListener(t,A,!1);else{var n="on"+t;n in e?e[n]=null:e.detachEvent(n,A)}}function b(e,t,n,r){var i=x(n);if(0===i)w(e,t,r);else{var o=x(r);if(0===o)1===i?null!==N(n)?e.removeChild(e.firstChild):P(e,u(n,e)):i>1&&(n=C(n,i,e),T(e,n,0,i));else if(1===i&&1===o){var a,f=N(n);if(null!==f&&null!==(a=N(r)))f!==a&&s(e,a);else{var c=u(n,e),d=l(r);V(c,d,e,t)}}else n=C(n,i,e),r=L(r,o,t),E(e,t,n,r)}}function w(e,t,n){var r=x(n);if(1===r){var i=N(n);null!==i?s(e,i):h(l(n),e,t)}else if(r>1){n=L(n,r,t);for(var o=0,a=n.length;a>o;o++)h(f(n,o),e,t)}}function x(e){return i(e)?e.length:e||r(e)?1:0}function C(e,t,n){if(e=t>1?e:i(e)?e:[e],1===t){var r=f(e,0);r.dom||(r.dom=n.firstChild)}return e}function L(e,t,n){return t>1?e:i(e)?e:n.children=[e]}function N(e){var t=i(e)?e[0]:e;return r(t)?t:"#"===t.tag?t.children:null}function T(e,t,n,r){var i,o=r-n;if(1===o)P(e,t[n]);else for(i=n;r>i;i++)P(e,t[i])}function P(e,t){j(t);for(var n,r=t.dom,i=t.domLength||1;i--;)n=i>0?r.nextSibling:null,e.removeChild(r),r=n}function E(e,t,n,r){var i=0,o=n.length-1,a=0,l=r.length-1,u=!0;e:for(;u&&o>=i&&l>=a;){u=!1;var c,s,v,m;for(c=n[i],v=f(r,a,c);c.key===v.key;){if(V(c,v,e,t),i++,a++,i>o||a>l)break e;c=n[i],v=f(r,a,c),u=!0}for(s=n[o],m=f(r,l,s);s.key===m.key;){if(V(s,m,e,t),o--,l--,i>o||a>l)break e;s=n[o],m=f(r,l),u=!0}for(;c.key===m.key;){if(V(c,m,e,t),d(e,m,r[l+1]),i++,l--,i>o||a>l)break e;c=n[i],m=f(r,l),u=!0}for(;s.key===v.key;){if(V(s,v,e,t),d(e,v,n[i]),o--,a++,i>o||a>l)break e;s=n[o],v=f(r,a),u=!0}}var g;if(i>o)for(g=f(r,l+1);l>=a;a++)h(f(r,a),e,t,g);else if(a>l)T(e,n,i,o+1);else{var p,y,k=n[o+1],b={};for(p=o;p>=i;p--)y=n[p],y.next=k,b[y.key]=y,k=y;for(g=f(r,l+1),p=l;p>=a;p--){var w=r[p],x=w.key;y=b[x],y?(b[x]=null,k=y.next,V(y,w,t),(k&&k.key)!==(g&&g.key)&&d(e,w,g)):h(w,e,t,g),g=w}for(p=i;o>=p;p++)y=n[p],null!==b[y.key]&&P(e,y)}}function A(e){e=H(e,this);var t=e.currentTarget,n=t.virtualNode.events[e.type];if(i(n)){for(var r=0,o=n.length;o>r;r++)if(O(n[r],t,e),Q){Q=!1;break}}else O(n,t,e)}function M(){this.defaultPrevented=!0,this.returnValue=!1}function S(){this.cancelBubble=!0}function B(){Q=!0,this.stopPropagation()}function H(e,n){if(!e){e=t.event,e.defaultPrevented=e.returnValue===!1,e.preventDefault=M,e.stopPropagation=S;var r=e.target=e.srcElement;e.currentTarget=n.nodeType?n:r}return e.stopImmediatePropagation=B,e}function O(e,t,n){try{e.call(t,n)===!1&&n.preventDefault()}catch(r){q.error(r.stack||r)}}function V(e,t,n,r){var i=t.tag;if(e.tag!==i)h(t,n,r,e,!0);else{var o=e.dom,a=e.children,f=t.children;switch(i){case"#":case"!":a!==f&&(o.nodeValue=f);break;case"<":return void(a!==f?h(t,n,r,e,!0):(t.dom=e.dom,t.domLength=e.domLength));default:m(o,e.attrs,e.events,t,i,t.attrs,t.events),b(o,t,a,c(t,f,a))}t.dom=o}}function j(e){var t=e.dom,r=e.events;if(r)for(var o in r)k(t,o);t.virtualNode&&(t.virtualNode=n);var a=e.children;if(a)if(i(a))for(var f=0,l=a.length;l>f;f++){var u=a[f];u.tag&&j(u)}else a.tag&&j(a)}function D(e,t){var r;for(r in e)t[r]=e[r];for(r in t)e[r]===n&&(t[r]=n)}var I=t.document,R=function(){},q=t.console||{warn:R,error:R},z=I.createElement("div"),F="textContent"in I,G="addEventListener"in I,J="createRange"in I,K="setProperty"in z.style,Q=(J?I.createRange():null,!1),U=e.vdom={create:function(e){return e=a(e),h(e),e},append:function(e,t){return t=U.create(t),e.appendChild(t.dom),t},update:function(e,t){return t=a(t,e),V(e,t,e.dom.parentNode),D(t,e),e},remove:function(e){var t=e.dom.parentNode;P(t,e)}}}(cito,window);