var cito=window.cito||{};!function(e,t,r){"use strict";function n(e){return"string"==typeof e}function i(e){return e instanceof Array}function o(e){return"function"==typeof e}function a(e,t){var r=typeof e;return"string"===r?{tag:"#",children:e}:"function"===r?a(e(t),t):e}function f(e,t,r){var n=e[t],i=a(n,r);return n!==i&&(e[t]=i),i}function c(e,t,r){var n=t;return o(t)&&(t=t(r)),i(t)||(t=t?[t]:[]),n!==t&&(e.children=t),t}function l(e,t,r){for(var n,i=t.dom,o=t.domLength||1,a=r&&r.dom;o--;)n=o>0?i.nextSibling:null,a?e.insertBefore(i,a):e.appendChild(i),i=n}function s(e,t,r){if(1===r.nodeType)r.insertAdjacentHTML("beforebegin",t);else{D.innerHTML=t;for(var n;n=D.firstChild;)e.insertBefore(n,r)}}function u(e,t,r,n,i){var o,a,f=e.tag,l=e.children;switch(f){case"#":o=M.createTextNode(l);break;case"!":o=M.createComment(l);break;case"<":if(l){var u=t.childNodes,v=u.length;if(n){a=n.dom;var h=a.previousSibling;s(t,l,a),e.dom=h?h.nextSibling:t.firstChild}else t.insertAdjacentHTML("beforeend",l),e.dom=u[v];return e.domLength=u.length-v,void(i&&n&&k(t,n))}o=M.createTextNode("");break;default:var m;switch(f){case"svg":m="http://www.w3.org/2000/svg";break;case"math":m="http://www.w3.org/1998/Math/MathML";break;default:m=r&&r.ns}m?(e.ns=m,o=M.createElementNS(m,f)):o=M.createElement(f),d(o,null,null,e,f,e.attrs,e.events),l=c(e,l),g(o,e,l,0,l.length)}if(e.dom=o,t)if(n)if(a=n.dom,i){var p=n.domLength||1;1===p?(C(n),t.replaceChild(o,a)):(t.insertBefore(o,a),k(t,n))}else t.insertBefore(o,a);else t.appendChild(o)}function d(e,t,n,i,o,a,f){var c;if(a)for(c in a){var l=a[c];if("style"===c){var s=t&&t[c];s!==l&&v(e,s,a,l)}else if(h(o,c))e[c]!==l&&(e[c]=l);else if(!t||t[c]!==l)if(l===!1)e.removeAttribute(c);else{l===!0&&(l="");var u,d=c.indexOf(":");if(-1!==d){var g=c.substr(0,d);switch(g){case"xlink":u="http://www.w3.org/1999/xlink"}}u?e.setAttributeNS(u,c,l):e.setAttribute(c,l)}}if(t)for(c in t)a&&a[c]!==r||(h(o,c)?e[c]="":e.removeAttribute(c));var y;if(f){e.virtualNode=i;for(y in f)n&&n[y]||m(e,y)}if(n)for(y in n)f&&f[y]||p(e,y)}function v(e,t,i,o){var a;if(!(n(o)||V&&t&&!n(t))){var f="";if(o)for(a in o)f+=a+": "+o[a]+"; ";o=f,V||(i.style=o)}var c=e.style;if(n(o))c.cssText=o;else{if(o)for(a in o){var l=o[a];if(!t||t[a]!==l){var s=l.indexOf("!important");if(-1!==s)c.setProperty(a,l.substr(0,s),"important");else{if(t){var u=t[a];u&&-1!==u.indexOf("!important")&&c.removeProperty(a)}c.setProperty(a,l,"")}}}if(t)for(a in t)o&&o[a]!==r||c.removeProperty(a)}}function h(e,t){switch(e){case"input":return"value"===t||"checked"===t;case"textarea":return"value"===t;case"select":return"selectedIndex"===t;case"option":return"selected"===t}}function m(e,t){if(H)e.addEventListener(t,w,!1);else{var r="on"+t;r in e?e[r]=w:e.attachEvent(r,w)}}function p(e,t){if(H)e.removeEventListener(t,w,!1);else{var r="on"+t;r in e?e[r]=null:e.detachEvent(r,w)}}function g(e,t,r,n,i,o){for(;i>n;n++)u(f(r,n),e,t,o)}function y(e,t,r,n){for(var i=r;n>i;i++)k(e,t[i])}function k(e,t){C(t);for(var r,n=t.dom,i=t.domLength||1;i--;)r=i>0?n.nextSibling:null,e.removeChild(n),n=r}function b(e,t,r,n){var i=0,o=r.length-1,a=0,c=n.length-1,s=!0;e:for(;s&&o>=i&&c>=a;){s=!1;var d,v,h,m;for(d=r[i],h=f(n,a,d);d.key===h.key;){if(E(d,h,e,t),i++,a++,i>o||a>c)break e;d=r[i],h=f(n,a,d),s=!0}for(v=r[o],m=f(n,c,v);v.key===m.key;){if(E(v,m,e,t),o--,c--,i>o||a>c)break e;v=r[o],m=f(n,c),s=!0}for(;d.key===m.key;){if(E(d,m,e,t),l(e,m,n[c+1]),i++,c--,i>o||a>c)break e;d=r[i],m=f(n,c),s=!0}for(;v.key===h.key;){if(E(v,h,e,t),l(e,h,r[i]),o--,a++,i>o||a>c)break e;v=r[o],h=f(n,a),s=!0}}if(i>o)g(e,t,n,a,c+1,f(n,c+1));else if(a>c)y(e,r,i,o+1);else{var p,b,w=r[o+1],x={};for(p=o;p>=i;p--)b=r[p],b.next=w,x[b.key]=b,w=b;var L=f(n,c+1);for(p=c;p>=a;p--){var N=n[p],P=N.key;b=x[P],b?(x[P]=null,w=b.next,E(b,N,t),(w&&w.key)!==(L&&L.key)&&l(e,N,L)):u(N,e,t,L),L=N}for(p=i;o>=p;p++)b=r[p],null!==x[b.key]&&k(e,b)}}function w(e){e=P(e,this);var t=e.currentTarget,r=t.virtualNode.events[e.type];if(i(r)){for(var n=0,o=r.length;o>n;n++)if(T(r[n],t,e),j){j=!1;break}}else T(r,t,e)}function x(){this.defaultPrevented=!0,this.returnValue=!1}function L(){this.cancelBubble=!0}function N(){j=!0,this.stopPropagation()}function P(e,r){return e||(e=t.event,e.preventDefault||(e.preventDefault=x,e.stopPropagation=L,e.defaultPrevented=e.returnValue===!1,e.target=e.srcElement),e.currentTarget=r.nodeType?r:e.target),e.stopImmediatePropagation=N,e}function T(e,t,r){try{e.call(t,r)===!1&&r.preventDefault()}catch(n){B.error(n.stack||n)}}function E(e,t,r,n){var i=t.tag;if(e.tag!==i)u(t,r,n,e,!0);else{var o=e.dom,a=e.children,f=t.children;switch(i){case"#":case"!":a!==f&&(o.nodeValue=f);break;case"<":return void(a!==f?u(t,r,n,e,!0):(t.dom=e.dom,t.domLength=e.domLength));default:d(o,e.attrs,e.events,t,i,t.attrs,t.events),b(o,t,a,c(t,f,a))}t.dom=o}}function C(e){var t=e.dom,n=e.events;if(n)for(var o in n)p(t,o);t.virtualNode&&(t.virtualNode=r);var a=e.children;if(a)if(i(a))for(var f=0,c=a.length;c>f;f++){var l=a[f];l.tag&&C(l)}else a.tag&&C(a)}function A(e,t){var n;for(n in e)t[n]=e[n];for(n in t)e[n]===r&&(t[n]=r)}var M=t.document,S=function(){},B=t.console||{warn:S,error:S},D=M.createElement("div"),H="addEventListener"in M,O="createRange"in M,V="setProperty"in D.style,j=(O?M.createRange():null,!1),I=e.vdom={create:function(e){return e=a(e),u(e),e},append:function(e,t){return t=I.create(t),e.appendChild(t.dom),t},update:function(e,t){return t=a(t,e),E(e,t,e.dom.parentNode),A(t,e),e},remove:function(e){var t=e.dom.parentNode;k(t,e)}}}(cito,window);