var cito=window.cito||{};!function(e,t,n){"use strict";function r(e){return"string"==typeof e}function i(e){return e instanceof Array}function o(e){return"function"==typeof e}function a(e,t){var n=typeof e;return"string"===n?{tag:"#",children:e}:"function"===n?a(e(t),t):e}function f(e,t,n){var r=e[t],i=a(r,n);return r!==i&&(e[t]=i),i}function l(e,t,n){var r,a=t;return o(t)&&(t=t(n)),i(t)||(t=t&&(t.children||"#"!==(r=t.tag)&&"<"!==r)?[t]:[]),a!==t&&(e.children=t),t}function c(e,t,n){for(var r,i=t.dom,o=t.domLength||1,a=n&&n.dom;o--;)r=o>0?i.nextSibling:null,a?e.insertBefore(i,a):e.appendChild(i),i=r}function u(e,t,n){if(1===n.nodeType)n.insertAdjacentHTML("beforebegin",t);else{j.innerHTML=t;for(var r;r=j.firstChild;)e.insertBefore(r,n)}}function d(e,t,n,r,i){var o,a,f=e.tag,c=e.children;switch(f){case"#":o=D.createTextNode(c);break;case"!":o=D.createComment(c);break;case"<":if(c){var d=t.childNodes,v=d.length;if(r){a=r.dom;var h=a.previousSibling;u(t,c,a),e.dom=h?h.nextSibling:t.firstChild}else t.insertAdjacentHTML("beforeend",c),e.dom=d[v];return e.domLength=d.length-v,void(i&&r&&b(t,r))}o=D.createTextNode("");break;default:var g;switch(f){case"svg":g="http://www.w3.org/2000/svg";break;case"math":g="http://www.w3.org/1998/Math/MathML";break;default:g=n&&n.ns}g?(e.ns=g,o=D.createElementNS(g,f)):o=D.createElement(f),s(o,null,null,e,f,e.attrs,e.events),c=l(e,c),y(o,e,c,0,c.length)}if(e.dom=o,t)if(r)if(a=r.dom,i){var m=r.domLength||1;1===m?(S(r),t.replaceChild(o,a)):(t.insertBefore(o,a),b(t,r))}else t.insertBefore(o,a);else t.appendChild(o)}function s(e,t,r,i,o,a,f){var l;if(a)for(l in a){var c=a[l];if("style"===l){var u=t&&t[l];u!==c&&v(e,u,a,c)}else if(h(o,l))e[l]!==c&&(e[l]=c);else if(!t||t[l]!==c)if(c===!1)e.removeAttribute(l);else{c===!0&&(c="");var d,s=l.indexOf(":");if(-1!==s){var p=l.substr(0,s);switch(p){case"xlink":d="http://www.w3.org/1999/xlink"}}d?e.setAttributeNS(d,l,c):e.setAttribute(l,c)}}if(t)for(l in t)a&&a[l]!==n||(h(o,l)?e[l]="":e.removeAttribute(l));var y;if(f){e.virtualNode=i;for(y in f)r&&r[y]||g(e,y)}if(r)for(y in r)f&&f[y]||m(e,y)}function v(e,t,i,o){var a;if(!(r(o)||z&&t&&!r(t))){var f="";if(o)for(a in o)f+=a+": "+o[a]+"; ";o=f,z||(i.style=o)}var l=e.style;if(r(o))l.cssText=o;else{if(o)for(a in o){var c=o[a];if(!t||t[a]!==c){var u=c.indexOf("!important");if(-1!==u)l.setProperty(a,c.substr(0,u),"important");else{if(t){var d=t[a];d&&-1!==d.indexOf("!important")&&l.removeProperty(a)}l.setProperty(a,c,"")}}}if(t)for(a in t)o&&o[a]!==n||l.removeProperty(a)}}function h(e,t){switch(e){case"input":return"value"===t||"checked"===t;case"textarea":return"value"===t;case"select":return"selectedIndex"===t;case"option":return"selected"===t}}function g(e,t){if(R)e.addEventListener(t,C,!1);else{var n="on"+t;n in e?e[n]=C:e.attachEvent(n,C)}}function m(e,t){if(R)e.removeEventListener(t,C,!1);else{var n="on"+t;n in e?e[n]=null:e.detachEvent(n,C)}}function p(e){return r(e)?e:"#"===e.tag?e.children:null}function y(e,t,n,r,i,o){if(0===r&&1===i&&1===n.length){var a=n[0],l=p(a);if(null!==l)return void w(e,l);if("<"===a.tag)return void(e.innerHTML=a.children)}for(;i>r;r++)d(f(n,r),e,t,o)}function k(e,t,n,r){if(0===n&&1===r&&1===t.length){var i=t[0];if(null!==p(i)||"<"===i.tag){for(var o;o=e.firstChild;)e.removeChild(o);return}}for(;r>n;n++)b(e,t[n])}function b(e,t){S(t);for(var n,r=t.dom,i=t.domLength||1;i--;)n=i>0?r.nextSibling:null,e.removeChild(r),r=n}function w(e,t){I?e.textContent=t:e.innerText=t}function x(e,t,n,r){var i=r[0],o=t[0],a=p(i),f=0!==n,l=!1;if(null!==a){if(!f){var c=p(o);l=null!==c,f=a!==c}f&&(l||B(t),w(e,a))}else"<"===i.tag?(f||(l="<"===o.tag,f=!l||i.children!==o.children),f&&(l||B(t),e.innerHTML=i.children)):f=!1;return f||l}function L(e,t,n,r){var i=n.length-1,o=r.length-1;if(0!==o||!x(e,n,i,r)){if(0===i){var a=f(n,0);a.dom=e.firstChild,"<"===a.tag&&(a.domLength=e.childNodes.length)}var l=0,u=0,s=!0;e:for(;s&&i>=l&&o>=u;){s=!1;var v,h,g,m;for(v=n[l],g=f(r,u,v);v.key===g.key;){if(A(v,g,e,t),l++,u++,l>i||u>o)break e;v=n[l],g=f(r,u,v),s=!0}for(h=n[i],m=f(r,o,h);h.key===m.key;){if(A(h,m,e,t),i--,o--,l>i||u>o)break e;h=n[i],m=f(r,o),s=!0}for(;v.key===m.key;){if(A(v,m,e,t),c(e,m,r[o+1]),l++,o--,l>i||u>o)break e;v=n[l],m=f(r,o),s=!0}for(;h.key===g.key;){if(A(h,g,e,t),c(e,g,n[l]),i--,u++,l>i||u>o)break e;h=n[i],g=f(r,u),s=!0}}if(l>i)y(e,t,r,u,o+1,f(r,o+1));else if(u>o)k(e,n,l,i+1);else{var p,w,L=n[i+1],C={};for(p=i;p>=l;p--)w=n[p],w.next=L,C[w.key]=w,L=w;var T=f(r,o+1);for(p=o;p>=u;p--){var N=r[p],P=N.key;w=C[P],w?(C[P]=null,L=w.next,A(w,N,t),(L&&L.key)!==(T&&T.key)&&c(e,N,T)):d(N,e,t,T),T=N}for(p=l;i>=p;p++)w=n[p],null!==C[w.key]&&b(e,w)}}}function C(e){e=E(e,this);var t=e.currentTarget,n=t.virtualNode.events[e.type];if(i(n)){for(var r=0,o=n.length;o>r;r++)if(M(n[r],t,e),F){F=!1;break}}else M(n,t,e)}function T(){this.defaultPrevented=!0,this.returnValue=!1}function N(){this.cancelBubble=!0}function P(){F=!0,this.stopPropagation()}function E(e,n){return e||(e=t.event,e.preventDefault||(e.preventDefault=T,e.stopPropagation=N,e.defaultPrevented=e.returnValue===!1,e.target=e.srcElement),e.currentTarget=n.nodeType?n:e.target),e.stopImmediatePropagation=P,e}function M(e,t,n){try{e.call(t,n)===!1&&n.preventDefault()}catch(r){V.error(r.stack||r)}}function A(e,t,n,r){var i=t.tag;if(e.tag!==i)d(t,n,r,e,!0);else{var o=e.dom,a=e.children,f=t.children;switch(i){case"#":case"!":a!==f&&(o.nodeValue=f);break;case"<":return void(a!==f?d(t,n,r,e,!0):(t.dom=e.dom,t.domLength=e.domLength));default:s(o,e.attrs,e.events,t,i,t.attrs,t.events),L(o,t,a,l(t,f,a))}t.dom=o}}function S(e){if(!r(e)){var t=e.dom;if(t){var i=e.events;if(i)for(var o in i)m(t,o);t.virtualNode&&(t.virtualNode=n)}var a=e.children;r(a)||B(a)}}function B(e){for(var t=0,n=e.length;n>t;t++)S(e[t])}function H(e,t){var r;for(r in e)t[r]=e[r];for(r in t)e[r]===n&&(t[r]=n)}var D=t.document,O=function(){},V=t.console||{warn:O,error:O},j=D.createElement("div"),I="textContent"in D,R="addEventListener"in D,q="createRange"in D,z="setProperty"in j.style,F=(q?D.createRange():null,!1),G=e.vdom={create:function(e){return e=a(e),d(e),e},append:function(e,t){return t=G.create(t),e.appendChild(t.dom),t},update:function(e,t){return t=a(t,e),A(e,t,e.dom.parentNode),H(t,e),e},remove:function(e){var t=e.dom.parentNode;b(t,e)}}}(cito,window);