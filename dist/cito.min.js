var cito=window.cito||{};!function(e,n,t){"use strict";function r(e){return"string"==typeof e}function i(e){return e instanceof Array}function o(e){return"function"==typeof e}function a(e){return e.then!==t}function f(e,n){var r=typeof e;return"string"===r?e={tag:"#",children:e}:"function"===r&&(e=e(n),e=e===t?n:f(e,n)),e}function l(e,n,t){var r,i=e[n];if(i&&a(i)){r={};var o=!0;i.then(function(i){o?r=f(i,t):e[n]===r&&Y.update(r,i)}),o=!1}else r=f(i,t);return i!==r&&(e[n]=r),r}function d(e,n,r){var f=n;if(n)if(a(n)){n=[];var l=!0;f.then(function(t){l?n=d(e,t,r):e.children===n&&Y.updateChildren(e,t)}),l=!1}else o(n)&&(n=n(r),n===t&&(n=r));var u,c,s=i(n);return s?1===n.length?(u=!0,c=n[0]):u=!1:(u=!0,c=n),u&&(c&&(c.children||"#"!==c.tag&&"<"!==c.tag)?s||(n=[c]):n=[]),f!==n&&(e.children=n),n}function u(e,n,t){var r,i=n.dom,o=n.domLength||1,a=t&&t.dom;if(i!==a)for(;o--;)r=o>0?i.nextSibling:null,a?e.insertBefore(i,a):e.appendChild(i),i=r}function c(e,n,t){if(e.insertAdjacentHTML){var r,i;if("<"!==t[0]){var o="beforebegin"===n?e.previousSibling:"beforeend"===n?e.lastChild:null;o&&3===o.nodeType&&(r=o,i=o.length)}e.insertAdjacentHTML(n,t),r&&r.length!==i&&r.splitText(i)}else{var a;if(G.innerHTML=t,"beforebegin"===n)for(var f=e.parentNode;a=G.firstChild;)f.insertBefore(a,e);else{if("beforeend"!==n)throw new Error("Unsupported: "+n);for(;a=G.firstChild;)e.appendChild(a)}}}function s(e,n,t,r){if(t){var i=t.dom;if(r){var o=t.domLength||1;1===o?(V(t),e.replaceChild(n,i)):(e.insertBefore(n,i),C(e,t))}else e.insertBefore(n,i)}else e.appendChild(n)}function v(e,n,t,r,i,o){var a,f=e.tag,l=e.children;if(f){switch(f){case"#":a=R.createTextNode(l);break;case"!":a=R.createComment(l);break;case"<":if(l){var u=n.childNodes,v=u.length;if(i){var m=i.dom,p=m.previousSibling;c(m,"beforebegin",l),a=p?p.nextSibling:n.firstChild}else c(n,"beforeend",l),a=u[v];return e.dom=a,e.domLength=u.length-v,void(o&&i&&C(n,i))}a=R.createTextNode("");break;default:var b;switch(f){case"svg":b="http://www.w3.org/2000/svg";break;case"math":b="http://www.w3.org/1998/Math/MathML";break;default:b=t}return b?(e.ns=b,a=R.createElementNS(b,f)):a=R.createElement(f),e.dom=a,l=d(e,l),F&&n&&s(n,a,i,o),x(a,e,b,l,0,l.length,l.length>1),g(a,null,null,e,f,e.attrs,e.events),void(!F&&n&&s(n,a,i,o))}e.dom=a,n&&s(n,a,i,o)}else h(e,l,n,t,r,i,o)}function h(e,n,t,r,i,o,a){n=d(e,n);var f,u,c=n.length;if(r&&(e.ns=r),0===c)f=R.createTextNode(""),s(t,f,o,a);else{i=i||c>1,u=0;for(var h=0;c>h;h++){var g=l(n,h);v(g,t,r,i,o,!1),u+=g.domLength||1}f=n[0].dom,a&&C(t,o)}e.dom=f,e.domLength=u}function g(e,n,r,i,o,a,f){var l;if(a)for(l in a){var d=a[l];if("style"===l){var u=n&&n[l];u!==d&&p(e,u,a,d)}else b(o,l)?e[l]!==d&&(e[l]=d):n&&n[l]===d||m(e,l,d)}if(n)for(l in n)a&&a[l]!==t||b(o,l)||e.removeAttribute(l);var c;if(f){e.virtualNode=i;for(c in f)r&&r[c]||y(e,c)}if(r)for(c in r)f&&f[c]||k(e,c)}function m(e,n,t){if(t===!1)e.removeAttribute(n);else{t===!0&&(t="");var r,i=n.indexOf(":");if(-1!==i){var o=n.substr(0,i);switch(o){case"xlink":r="http://www.w3.org/1999/xlink"}}r?e.setAttributeNS(r,n,t):e.setAttribute(n,t)}}function p(e,n,i,o){var a;if(!(r(o)||W&&n&&!r(n))){var f="";if(o)for(a in o)f+=a+": "+o[a]+"; ";o=f,W||(i.style=o)}var l=e.style;if(r(o))l.cssText=o;else{if(o)for(a in o){var d=o[a];if(!n||n[a]!==d){var u=d.indexOf("!important");if(-1!==u)l.setProperty(a,d.substr(0,u),"important");else{if(n){var c=n[a];c&&-1!==c.indexOf("!important")&&l.removeProperty(a)}l.setProperty(a,d,"")}}}if(n)for(a in n)o&&o[a]!==t||l.removeProperty(a)}}function b(e,n){switch(e){case"input":return"value"===n||"checked"===n;case"textarea":return"value"===n;case"select":return"value"===n||"selectedIndex"===n;case"option":return"selected"===n}}function y(e,n){if(K)e.addEventListener(n,P,!1);else{var t="on"+n;t in e?e[t]=P:e.attachEvent(t,P)}}function k(e,n){if(K)e.removeEventListener(n,P,!1);else{var t="on"+n;t in e?e[t]=null:e.detachEvent(t,P)}}function w(e){return r(e)?e:"#"===e.tag?e.children:null}function x(e,n,t,r,i,o,a,f){if(0===i&&1===o&&!a){var d=r[0],u=w(d);if(null!==u)return void T(e,u);if("<"===d.tag)return void(e.innerHTML=d.children)}for(;o>i;i++)v(l(r,i),e,t,a,f)}function L(e,n,t,r){if(0===t&&1===r&&1===n.length){var i=n[0];if(!i.dom){for(var o;o=e.firstChild;)e.removeChild(o);return}}for(;r>t;t++)C(e,n[t])}function C(e,n){V(n);for(var t,r=n.dom,i=n.domLength||1;i--;)t=i>0?r.nextSibling:null,e.removeChild(r),r=t}function T(e,n){J?e.textContent=n:e.innerText=n}function N(e,n,t,r){var i=r[0],o=n[0],a=w(i),f=0!==t,l=!1;if(null!==a){if(!f){var d=w(o);l=null!==d,f=a!==d}f&&(l||j(n),T(e,a))}else"<"===i.tag?(f||(l="<"===o.tag,f=!l||i.children!==o.children),f&&(l||j(n),e.innerHTML=i.children)):f=!1;return f||l}function E(e,n,t,r,i,o,a){if(i=d(n,i,r),i!==r){var f=r.length-1,c=i.length-1;if(o=o||c>0,0!==c||o||!N(e,r,f,i)){if(0===f){var s=l(r,0);s.dom||(s.dom=e.firstChild,"<"===s.tag&&(s.domLength=e.childNodes.length))}var h,g=0,m=0,p=!0;e:for(;p&&f>=g&&c>=m;){p=!1;var b,y,k,w;for(b=r[g],k=l(i,m,b);b.key===k.key;){if(h=r[g+1]||a,O(b,k,e,t,o,h),g++,m++,g>f||m>c)break e;b=r[g],k=l(i,m,b),p=!0}for(y=r[f],w=l(i,c);y.key===w.key;){if(h=i[c+1]||a,O(y,w,e,t,o,h),f--,c--,g>f||m>c)break e;y=r[f],w=l(i,c),p=!0}for(;b.key===w.key;){if(h=i[c+1]||a,O(b,w,e,t,o,h),u(e,w,h),g++,c--,g>f||m>c)break e;b=r[g],w=l(i,c),p=!0}for(;y.key===k.key;){if(h=r[g]||a,O(y,k,e,t,h),u(e,k,h),f--,m++,g>f||m>c)break e;y=r[f],k=l(i,m),p=!0}}if(g>f)h=l(i,c+1)||a,x(e,n,t,i,m,c+1,o,h);else if(m>c)L(e,r,g,f+1);else{var T,E,P=r[f+1],A={};for(T=f;T>=g;T--)E=r[T],E.next=P,A[E.key]=E,P=E;for(h=l(i,c+1)||a,T=c;T>=m;T--){var M=i[T],S=M.key;E=A[S],E?(A[S]=null,P=E.next,O(E,M,e,t,o,h),(P&&P.key)!==(h&&h.key)&&u(e,M,h)):v(M,e,t,o,h),h=M}for(T=g;f>=T;T++)E=r[T],null!==A[E.key]&&C(e,E)}}}}function P(e){e=B(e,this);var n=e.currentTarget,t=n.virtualNode.events[e.type];if(i(t)){for(var r=0,o=t.length;o>r;r++)if(H(t[r],n,e),X){X=!1;break}}else H(t,n,e)}function A(){this.defaultPrevented=!0,this.returnValue=!1}function M(){this.cancelBubble=!0}function S(){X=!0,this.stopPropagation()}function B(e,t){return e||(e=n.event,e.preventDefault||(e.preventDefault=A,e.stopPropagation=M,e.defaultPrevented=e.returnValue===!1,e.target=e.srcElement),e.currentTarget=t.nodeType?t:e.target),e.stopImmediatePropagation=S,e}function H(e,n,t){try{e.call(n,t)===!1&&t.preventDefault()}catch(r){z.error(r.stack||r)}}function O(e,n,t,r,i,o){if(n!==e){var a,f=n.tag,l=e.children,d=n.children;if(e.tag!==f)v(n,t,r,i,e,!0);else if(f)switch(a=e.dom,f){case"#":case"!":l!==d&&(a.nodeValue=d),n.dom=a;break;case"<":l!==d?v(n,t,u,i,e,!0):(n.dom=e.dom,n.domLength=e.domLength);break;default:var u=e.ns;u&&(n.ns=u),n.dom=a,E(a,n,u,l,d,!1),g(a,e.attrs,e.events,n,f,n.attrs,n.events)}else D(e,l,n,d,t,r,i,o)}}function D(e,n,t,r,i,o,a,f){if(r=d(t,r,n),r!==n){var l,u,c=n.length,v=r.length;if(o&&(t.ns=o),a=a||v>1,0===v)0===c?l=e.dom:(L(i,n,0,n.length),l=R.createTextNode(""),s(i,l,f));else if(0===c)i.removeChild(e.dom),h(t,r,i,o,a,f);else if(E(i,t,o,n,r,a,f),v>0){l=r[0].dom,u=0;for(var g=0;v>g;g++)u+=r[g].domLength||1}t.dom=l,t.domLength=u}}function V(e){if(!r(e)){var n=e.dom;if(n){var i=e.events;if(i)for(var o in i)k(n,o);n.virtualNode&&(n.virtualNode=t)}var a=e.children;r(a)||j(a)}}function j(e){for(var n=0,t=e.length;t>n;n++)V(e[n])}function I(e,n){var r;for(r in e)n[r]=e[r];for(r in n)e[r]===t&&(n[r]=t)}var R=n.document,U=n.navigator,q=function(){},z=n.console||{warn:q,error:q},F=-1!==U.userAgent.indexOf("Trident"),G=R.createElement("div"),J="textContent"in R,K="addEventListener"in R,Q="createRange"in R,W="setProperty"in G.style,X=(Q?R.createRange():null,!1),Y=e.vdom={create:function(e){return e=f(e),v(e),e},append:function(e,n){return n=Y.create(n),e.appendChild(n.dom),n},update:function(e,n){return n=f(n,e),O(e,n,e.dom.parentNode),I(n,e),e},updateChildren:function(e,n){var t=e.children;n=d(e,n,t),E(e.dom,e,e.ns,t,n),e.children=n},remove:function(e){var n=e.dom.parentNode;C(n,e)}}}(cito,window);