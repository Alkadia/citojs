var cito=window.cito||{};!function(e,n,t){"use strict";function r(e){return"string"==typeof e}function i(e){return e instanceof Array}function o(e){return"function"==typeof e}function a(e,n){var r=typeof e;return"string"===r?e={tag:"#",children:e}:"function"===r&&(e=e(n),e=e===t?n:a(e,n)),e}function l(e,n,t){var r=a(n,t);return n!==r&&e&&(e.children=r),r}function f(e,n,t){var r=l(null,u(e,n));return r.dom||(r.dom=t.firstChild,"<"===r.tag&&(r.domLength=t.childNodes.length)),r}function d(e,n,t){var r=e[n],i=a(r,t);return r!==i&&(e[n]=i),i}function s(e,n,r){return o(n)&&(n=n(r),n===t&&(n=r),e.children=n),n}function u(e,n){return 1===n?e[0]:e}function c(e,n,t){var r,i=n.dom,o=n.domLength||1,a=t&&t.dom;if(i!==a)for(;o--;)r=o>0?i.nextSibling:null,a?e.insertBefore(i,a):e.appendChild(i),i=r}function v(){return $.createTextNode("")}function h(e,n,t){if(e.insertAdjacentHTML){var r,i,o;if(Y||Z){var a="beforebegin"===n?e.previousSibling:"beforeend"===n?e.lastChild:null;a&&3===a.nodeType&&(r=a,Z&&0===a.length&&(o=!0,a.nodeValue=" "),Y&&(i=a.length))}e.insertAdjacentHTML(n,t),r&&(Y&&r.length!==i&&r.splitText(i),Z&&o&&(r.nodeValue=""))}else if(ln.innerHTML=t,"beforebegin"===n)for(var l=e.parentNode;ln.firstChild;)l.insertBefore(ln.firstChild,e);else if("beforeend"===n)for(;ln.firstChild;)e.appendChild(ln.firstChild)}function g(e,n,t,r){if(t){var i=t.dom;if(r){var o=t.domLength||1;1===o?(Q(t),e.replaceChild(n,i)):(e.insertBefore(n,i),O(e,t))}else e.insertBefore(n,i)}else e.appendChild(n)}function m(e,n,r,i,o,a){if(an)return p(e,n,i,o);var l,f=e.tag,d=e.children;switch(f){case t:return T(e,d,n,r,i,o);case"#":if(a)return void B(n,d);l=$.createTextNode(d);break;case"!":l=$.createComment(d);break;case"<":if(d){if(a)n.innerHTML=d;else{var s=n.childNodes,u=s.length;if(i){var c=i.dom,m=c.previousSibling;h(c,"beforebegin",d),l=m?m.nextSibling:n.firstChild}else h(n,"beforeend",d),l=s[u];e.dom=l,e.domLength=s.length-u,o&&i&&O(n,i)}return}l=v();break;default:var b;switch(f){case"svg":b="http://www.w3.org/2000/svg";break;case"math":b="http://www.w3.org/1998/Math/MathML";break;default:b=r}b?(e.ns=b,l=$.createElementNS(b,f)):l=$.createElement(f),e.dom=l,an&&n&&g(n,l,i,o),"string"==typeof d?B(l,d,!1):H(l,e,b,d,!1);var x=e.attrs;x&&w(l,f,x);var C=e.events;return C&&M(l,e,C),void(!an&&n&&g(n,l,i,o))}e.dom=l,n&&g(n,l,i,o)}function p(e,n,t,r){var i,o=b(e);if(n){var a;t||n.hasChildNodes()?(t?(a=t.dom.previousSibling,h(t.dom,"beforebegin",o),r&&O(n,t)):(a=n.lastChild,h(n,"beforeend",o)),i=a?a.nextSibling:n.firstChild):(n.innerHTML=o,i=n.firstChild)}else ln.innerHTML=o,i=ln.removeChild(ln.firstChild);x(i,e)}function b(e,n){var i=e.tag,o=e.children;switch(i){case"#":return y(o)+vn;case"!":return"<!--"+k(o)+"-->";case"<":return o+vn;default:var a;if(i){var f=e.attrs;if("select"===i&&f?n={selectedIndex:f.selectedIndex,value:f.value,optionIndex:0}:"option"===i&&n&&((n.value&&n.value===f.value||n.selectedIndex!==t&&n.selectedIndex===n.optionIndex)&&(f.selected=!0),n.optionIndex++),a="<"+i,f){a+=" ";for(var c in f){var v=f[c];if(v!==!1&&("select"!==i||"value"!==c&&"selectedIndex"!==c))if("textarea"!==i||"value"!==c){if(v===!0)v="";else if("style"===c&&!r(v)){var h="";for(var g in v)h+=g+": "+v[g]+"; ";v=h}a+=" "+L(c,v)}else o=v}}}else a="";i&&(a+=">"),o=s(e,o);var m=I(o);if(m>1)for(var p=0,x=o.length;x>p;p++)a+=b(d(o,p),n);else if(0!==m){var C=u(o,m);r(C)?(a+=y(C),i&&C||(a+=vn)):a+=b(l(e,C),n)}else i||(a+=vn);return i&&(a+="</"+i+">"),a}}function x(e,n){var t=n.tag;if(t){n.dom=e;var i,o;switch(t){case"#":i=e.nodeValue,o=i.indexOf(vn),-1!==o&&(o+1<i.length&&e.splitText(o+1),e.nodeValue=i.substr(0,o));break;case"!":break;case"<":for(var a,l=0;e;e=e.nextSibling)if(l++,3===e.nodeType){if(i=e.nodeValue,l>1&&i===vn){a=e.nextSibling,e.parentNode.removeChild(e),l--;break}if(o=i.indexOf(vn),-1!==o){o+1<i.length&&e.splitText(o+1),e.nodeValue=i.substr(0,o),a=e.nextSibling;break}}return n.domLength=l,a;default:var f=n.children,d=I(f);if(d>1){f=n.children;for(var s=e.firstChild,c=0,v=f.length;v>c;c++)s=x(s,f[c])}else if(0!==d){var h=u(f,d);r(h)?h||(e.firstChild.data=""):x(e.firstChild,h)}var g=n.events;g&&M(e,n,g)}return e.nextSibling}return C(e,n)}function C(e,n){var t,r=n.children,i=I(r);if(0===i)e.length>1&&e.splitText(1),e.nodeValue="",n.dom=e,t=e.nextSibling;else{if(i>1){t=e;for(var o=0;o<r.length;o++)t=x(t,r[o]);e=r[0].dom}else{var a=l(n,u(r,i));t=x(e,a),e=a.dom}n.dom=e;for(var f=0;e!==t;)f++,e=e.nextSibling;n.domLength=f}return t}function y(e){return e=""+e,rn?(ln.innerText=e,e=ln.innerHTML):e=on?e.split("<").join("&lt;").split(">").join("&gt;").split("&").join("&amp;"):e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;"),e}function k(e){return e=""+e,e.replace(/-{2,}/g,"-")}function L(e,n){var t=typeof n;return n=""+n,"number"!==t&&(n=on?n.split('"').join("&quot;").split("&").join("&amp;"):n.replace(/"/g,"&quot;").replace(/&/g,"&amp;")),e+'="'+n+'"'}function T(e,n,t,r,i,o){n=s(e,n);var a,f,c,h=I(n);if(r&&(e.ns=r),0===h)a=v(),g(t,a,i,o);else if(h>1){f=0;for(var p=0,b=n.length;b>p;p++)c=d(n,p),m(c,t,r,i,!1),f+=c.domLength||1;a=n[0].dom,o&&O(t,i)}else c=l(e,u(n,h)),m(c,t,r,i,o),a=c.dom,f=c.domLength;e.dom=a,e.domLength=f}function w(e,n,r,i){var o;if(r)for(o in r){var a=r[o];if("style"===o){var l=i&&i[o];l!==a&&S(e,l,r,a)}else"class"===o?e.className=a:A(n,o)?e[o]!==a&&(e[o]=a):i&&i[o]===a||N(e,o,a)}if(i)for(o in i)r&&r[o]!==t||("class"===o?e.className="":A(n,o)||e.removeAttribute(o))}function N(e,n,t){if(t===!1)e.removeAttribute(n);else{t===!0&&(t="");var r,i=n.indexOf(":");if(-1!==i){var o=n.substr(0,i);switch(o){case"xlink":r="http://www.w3.org/1999/xlink"}}r?e.setAttributeNS(r,n,t):e.setAttribute(n,t)}}function S(e,n,i,o){var a;if(!(r(o)||un&&n&&!r(n))){var l="";if(o)for(a in o)l+=a+": "+o[a]+"; ";o=l,un||(i.style=o)}var f=e.style;if(r(o))f.cssText=o;else{if(o)for(a in o){var d=o[a];if(!n||n[a]!==d){var s=d.indexOf("!important");if(-1!==s)f.setProperty(a,d.substr(0,s),"important");else{if(n){var u=n[a];u&&-1!==u.indexOf("!important")&&f.removeProperty(a)}f.setProperty(a,d,"")}}}if(n)for(a in n)o&&o[a]!==t||f.removeProperty(a)}}function M(e,n,t,r){var i;if(t){e.virtualNode=n;for(i in t)r&&r[i]||E(e,i)}if(r)for(i in r)t&&t[i]||j(e,i)}function A(e,n){switch(e){case"input":return"value"===n||"checked"===n;case"textarea":return"value"===n;case"select":return"value"===n||"selectedIndex"===n;case"option":return"selected"===n}}function E(e,n){if(dn)e.addEventListener(n,q,!1);else{var t="on"+n;t in e?e[t]=q:e.attachEvent(t,q)}}function j(e,n){if(dn)e.removeEventListener(n,q,!1);else{var t="on"+n;t in e?e[t]=null:e.detachEvent(t,q)}}function H(e,n,t,i,o){i=s(n,i);var a=I(i);if(a>1)for(var f=0,c=i.length;c>f;f++)m(d(i,f),e,t);else if(0!==a){var v=u(i,a);!o&&r(v)?B(e,v):(v=l(n,v),m(v,e,t,null,!1,!o))}}function I(e){return i(e)?e.length:e||r(e)?-1:0}function P(e,n,t){t>1?V(e,n,0,n.length):0!==t&&(r(n)?e.removeChild(e.firstChild):O(e,f(n,t,e)))}function V(e,n,t,r){for(;r>t;t++)O(e,n[t])}function O(e,n){Q(n);for(var t,r=n.dom,i=n.domLength||1;i--;)t=i>0?r.nextSibling:null,e.removeChild(r),r=t}function B(e,n,t){if(n)fn?e.textContent=n:e.innerText=n;else{if(t)for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(v())}}function D(e,n,t,i,o,a,v){if(o=s(n,o,i),o!==i){var h=I(i);if(0===h)return void H(e,n,t,o,!1);var g,p,b=I(o);if(0===b)return void P(e,i,h);if(2>b){if(p=u(o,b),!a&&r(p))return void((b!==h||p!==u(i,h))&&(U(i,h),B(e,p,!0)));if(2>h)return g=f(i,h,e),p=l(n,p,g),void G(g,p,e,t,null,0,v,!a)}-1===b&&(n.children=o=[o]),2>h&&(g=f(i,h,e),1===h?i[0]=g:i=[g]);var x,C=i.length,y=o.length,k=C-1,L=o.length-1,T=0,w=0,N=!0;e:for(;N&&k>=T&&L>=w;){N=!1;var S,M,A,E;for(S=i[T],A=d(o,w,S);S.key===A.key;){if(G(S,A,e,t,i,T+1,v),T++,w++,T>k||w>L)break e;S=i[T],A=d(o,w,S),N=!0}for(M=i[k],E=d(o,L);M.key===E.key;){if(G(M,E,e,t,o,L+1,v),k--,L--,T>k||w>L)break e;M=i[k],E=d(o,L),N=!0}for(;S.key===E.key;){if(x=y>L+1?o[L+1]:v,G(S,E,e,t,null,0,x),c(e,E,x),T++,L--,T>k||w>L)break e;S=i[T],E=d(o,L),N=!0}for(;M.key===A.key;){if(x=C>T?i[T]:v,G(M,A,e,t,null,0,x),c(e,A,x),k--,w++,T>k||w>L)break e;M=i[k],A=d(o,w),N=!0}}if(T>k)for(x=y>L+1?d(o,L+1):v,j=w;L>=j;j++)m(d(o,j),e,t,x);else if(w>L)V(e,i,T,k+1);else{var j,D=i[k+1],q={};for(j=k;j>=T;j--)g=i[j],g.next=D,q[g.key]=g,D=g;for(x=y>L+1?d(o,L+1):v,j=L;j>=w;j--){p=o[j];var R=p.key;g=q[R],g?(q[R]=null,D=g.next,G(g,p,e,t,null,0,x),(D&&D.key)!==(x&&x.key)&&c(e,p,x)):m(p,e,t,x),x=p}for(j=T;k>=j;j++)g=i[j],null!==q[g.key]&&O(e,g)}}}function q(e){e=z(e,this);var n=e.currentTarget,t=n.virtualNode.events[e.type];if(i(t)){for(var r=0,o=t.length;o>r;r++)if(F(t[r],n,e),hn){hn=!1;break}}else F(t,n,e)}function R(){this.defaultPrevented=!0,this.returnValue=!1}function K(){this.cancelBubble=!0}function W(){hn=!0,this.stopPropagation()}function z(e,t){return e||(e=n.event,e.preventDefault||(e.preventDefault=R,e.stopPropagation=K,e.defaultPrevented=e.returnValue===!1,e.target=e.srcElement),e.currentTarget=t.nodeType?t:e.target),e.stopImmediatePropagation=W,e}function F(e,n,t){try{e.call(n,t)===!1&&t.preventDefault()}catch(r){nn.error(r.stack||r)}}function G(e,n,r,i,o,a,l,f){if(n!==e){var d=n.tag;if(e.tag!==d)m(n,r,i,e,!0);else{var s=e.dom,u=e.children,c=n.children;switch(d){case t:var v=o&&a<o.length?o[a]:l;J(e,u,n,c,r,i,v);break;case"#":case"!":u!==c&&(s.nodeValue=c),n.dom=s;break;case"<":u!==c?m(n,r,null,e,!0,f):(n.dom=e.dom,n.domLength=e.domLength);break;default:var h=e.ns;h&&(n.ns=h),n.dom=s,c!==u&&D(s,n,h,u,c,!1);var g=n.attrs,p=e.attrs;g!==p&&w(s,d,g,p);var b=n.events,x=e.events;b!==x&&M(s,n,b,x)}}}}function J(e,n,t,r,o,a,l){if(r=s(t,r,n),r!==n){var f,d,u=I(r),c=I(n);if(a&&(t.ns=a),0===u)0===c?f=e.dom:(P(o,n,c),f=v(),g(o,f,l));else{if(0===c)return o.removeChild(e.dom),void T(t,r,o,a,l);if(D(o,t,a,n,r,!0,l),r=t.children,i(r)){f=r[0].dom,d=0;for(var h=0,m=r.length;m>h;h++)d+=r[h].domLength||1}else f=r.dom,d=r.domLength}t.dom=f,t.domLength=d}}function Q(e){if(!r(e)){var n=e.dom;if(n){var i=e.events;if(i)for(var o in i)j(n,o);n.virtualNode&&(n.virtualNode=t)}var a=e.children;a&&U(a,I(a))}}function U(e,n){if(n>1)for(var t=0,r=e.length;r>t;t++)Q(e[t]);else 0!==n&&Q(u(e,n))}function X(e,n){var r;for(r in e)n[r]=e[r];for(r in n)e[r]===t&&(n[r]=t)}var Y,Z,$=n.document,_=n.navigator,en=function(){},nn=n.console||{warn:en,error:en},tn=_.userAgent,rn=-1!==tn.indexOf("WebKit"),on=-1!==tn.indexOf("Chrome"),an=-1!==tn.indexOf("Trident"),ln=$.createElement("div"),fn="textContent"in $,dn="addEventListener"in $,sn="createRange"in $,un="setProperty"in ln.style,cn=$.createElement("p");cn.insertAdjacentHTML&&(cn.appendChild($.createTextNode("a")),cn.insertAdjacentHTML("beforeend","b"),Y=1===cn.childNodes.length,cn=$.createElement("p"),cn.appendChild(v()),cn.insertAdjacentHTML("beforeend","<b>"),Z=3!==cn.firstChild.nodeType);{var vn="",hn=(sn?$.createRange():null,!1);e.vdom={create:function(e){return e=a(e),m(e),e},append:function(e,n){return n=a(n),m(n,e),n},update:function(e,n){return n=a(n,e),G(e,n,e.dom.parentNode),X(n,e),e},updateChildren:function(e,n){var t=e.children;t!==n&&D(e.dom,e,e.ns,t,n,!e.tag)},remove:function(e){var n=e.dom.parentNode;O(n,e)}}}}(cito,window);